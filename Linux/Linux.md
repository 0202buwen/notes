# Seconder

- 部署环境

- 通过查看日志定位问题

- 操作数据库进行数据校验或者数据准备

- 监控服务器性能指标

- …………

- 快捷键：

  - Ctrl + C ---》句首
  - Ctrl + E ---〉句末
  - Ctrl + C ---》中断
  - Ctrl + L ---〉清屏
  - pwd ： 查看当前目录的路径
  - claer ： 清屏
  - which工具名称： 查找工具的安装位置
    - which ls
    - which cd
  - 终端中使用 gedit打开一个记事本

  

---

## 目录结构

`树形结构文件目录`

- /：根目录，唯一
- /home：用户目录
- /root：系统管理员root目录
- /bin：放命令的目录
- /usr：应用程序
- /etc：系统配置
- /boot：内核文件
- /tmp：临时文件

---

## Linux远程连接

工具：Xshell，Finalshell

- 远程连接Linux服务器之前 
  - 知道Linux服务器的IP地址
  - SSH的端口（默认22）
    - ifconfig---》查看ip地址
      - ping一下，看是否能ping通
    - 确定Linux当中SSH的服务是否开通
      - netstat  -anpt ｜grep  shh
    - netstat  -anopt|grep  sshd ---〉查看SSH的端口

---

## 命令

- 格式：command [-options] [parameter]
  - ls
    - ls -lh /bin
    - ls /bin
    - ls -lh
  - command ---》表示的是命令的名称
  - [] ---〉可选项
  - [-options] ---》命令的选项，0/1/N个
  - [parameter] ---〉 命令的参数，0/1/N个

---

## 命令帮助信息查看

- --help ---》查看命令的帮助信息
  - 格式：command  --help
    - 查看的帮助信息比较简洁
  - ls --help
- man--》命令查看帮助信息
  - 格式：man command  （命令的名称）
    - man 信息更详细
  - 常用快捷键
    - Space：下一页、翻页
    - Enter：滚动翻页
    - B：上一页
    - F：下一页
    - /word：可以搜索对应的关键字 （word）
    - Q：退出man命令显示模式
  - 例子：man ls

---

## 常用命令

### 文件和目录

- ls ---》查看目录内容
- cd ---〉切换目录
- touch、rm、mkdir---》创建和删除
- cp、mv---〉拷贝和移动文件
- cat、more、grep---》查看文件内容
- 重定向和管道符、pwd、clear

---

#### 查看目录内容：ls

- 格式：ls[-lah] [文件或目录]

```shell
ls # 列举当前目录的文件内容
ls -l # 以列表的形式显示内容
ls -a # 显示所有内容，包含隐藏文件
ls -lh # 列表形式显示文件内存大小，h必须和l一起使用
ls -lha # 列表方式，更加人性化，显示出文件内存大小
ls -lha /usr/bin # 查看/usr/bin文件夹的内容
```



- 通配符可以匹配符合条件的文件或者目录
  - *：0-N个任意字符
  - ？：单个任意字符
  - [abcd]：匹配括号内（a、b、c、d）任意一个字符
  - [a-d]：a-d表示从a到d到范围，也就是--》a、b、c、d中匹配任意一个字符

- touch 创建文件，并不是文件夹

```shell
touch 1.txt a.txt.ab.txt
ls *.txt
ls ?.txt
ls [abcd].txt
ls [abcd][abcd].txt
ls [a-d].txt
```

---

#### 切换目录：cd

**绝对路径：**以根路径或家路径开头，表示从根目录/家目录 开始的具体目录位置

**相对位置：**不以根路径或者家目录开头，表示相对当前目录所在的目录位置

cd -：切换到上一次所在目录



绝对路径：唯一

>/开头		cd/e t c/abrt
>
>~/开头		cd/usr/bin
>
>～   ---》/home/用户(admin)    -----〉可以用pwd查看当前目录路径进行验证
>
> 
>
>相对路径：有个参照物
>
>cd/usr/bin下
>
>​	cd/home  ---》先找    /(根目录)，进入/，找home
>
>​	cd home ---〉在当前(bin)目录下，找home
>
>​	cd点	---》切换到当前路径
>
>​	cd点/	---〉切换到当前路径
>
>​	cd点点	---》返回上一级目录
>
>cd 或者 cd～  ---〉快速回到根目录

---

#### 创建文件/目录

- 格式touch 文件名（不是文件夹，多个文件名用Space隔开）
  - 如果创建的文件名不存在，直接新建
- 如果创建的文件名已经存在，则更新文件的修改时间

 

- mkdir 目录(文件夹)名称    （多个目录之间Space隔开）
  - -p  选项，实现多个层级的目录创建
  - mkdir  -p d1/d2/d3
  - 如果目录名称以存在，则创建失败
  - mkdir d---》在当前目录下创建d文件夹
  - mkdir /d ---〉在根目录下创建d文件夹

---

#### 删除文件或目录 ---》无法恢复

**格式：** rm [ifr(选项)] 目录名或文件名     ---〉建议都加参数  i

- -i ： 表示交互式执行，删除前会询问是否删除
- -f ： 表示强制删除，忽略不存在的文件，无需提示
- -r ： 表示删除**文件夹**下所有内容
- 一般使用：**rm -rf  目录名/文件名**

----

#### 文件或目录的复制

- 格式 ： cp 源文件 目标文件

options：

- -f ： 强制覆盖已存在的文件，不提示
- -i ： 覆盖已存在的文件，并提示
- -r ： 若源文件为目录，则复制目录下所有的内容时，必须带上   r 参数
- -v ： 显示复制的进度（一般不用）

---

#### 文件或目录的移动

- 命令格式：mv  源文件  目标文件

options

- -f ： 强制覆盖已存在的目标文件，不提示
- -i ： 覆盖文件时，提示询问
- -v ： 显示移动的进度（一般不用）
- mv  a.txt ../b.txt  --->a文件移动到上一级路径并改名为b.txt
- mv a.txt  b.txt ---》a文件改名为b.txt

---

### 文件内容

#### 查看文件内容（一） cat

- cat命令：查看文件内容比较少的文件

  - cat 可以用来查看文件、创建文件、合并文件、追加文件

  options

  - -b ： 表示输出非空的行编号
  - -n ： 表示输出所有的行编号

- cat -n /usr/include/stdio.h

---

#### 查看文件内容（二） more

- more命令：查看文件内容较多的文件，**每次显示一页内容**
- 格式：more 文件名
  - 快捷键：Space --》显示下一页
- enter ： 滚动显示下一行
  - b ： （回滚）显示上一页
  - f ： 显示下一页
  - q ： 退出

---

#### 查看文件内容（三-重点）grep

- 格式：grep 文件名   ---》grep [options] ['正则'] 文件名
- grep是一个强大的文本搜索工具，允许对文本进行模式查找（正则）

options

- -v ： 显示不包含匹配文本的所有行（取反）
- -n ： 显示匹配的行及行号
- -i ： 忽略大小写

使用正则（例子）：

- ^a : 搜索行首内容以a文本开头的行。  ---》grep -n '^a' 1.txt
- ke$: 搜索行尾内容以ke文本结尾的行。---〉grep -n 'ke$' 1.txt
- [Ss]inga[Ll] : 匹配[]中的任意一个字符，搜索匹配单词为SignaL、Sinagl、signaL、signal的行---》grep -n '[Ss]igna[Ll]'

---

#### 重定向：>  和  >>

- 将命令输出的结果写入到（重定向）到另外的文件当中
  - \> ---》将命令输出的结果覆盖到对应的文件当中
  - \>\> ---〉将命令输出的结果追加到对应的文件当中

```shell
cat 1.txt > 2.txt # 将1.txt的内容覆盖掉2.txt的内容
cat 1.txt >> 2.txt # 追加1.txt文件到2.txt后面
cat 1.txt 2.txt > 3.txt # 将1.txt和2.txt的内容合并到3.txt文件当中
ls -al > 1.txt
```

---

#### 管道符 ｜

- Linux允许将一个命令的输出结果  可以 通过管道  作为  另一个命令的输入

**常用的管道命令：**

- more：分屏显示执行结果
- grep：通过grep过滤执行结果的内容
  - ls -l /usr/bin ｜ more
  - ls /usr/bin ｜grep '^au'

---

#### 【拓展】回显 echo

- 输入啥，回显啥
- echo 123 ---》123
- echo mike ---〉mike
- 一般和管道符一起使用

---

1. echo "" >  /var/log/messages ----》通过重定向命令删除messages文件中的内容
2. cat 1.txt 2.txt > 3.txt
3. ls /bin | grep test

---

### 信息系统相关

#### 【了解】重启关机

- 重启：reboot
- 关机：shutdown

options：

- shutdown -r now ：表示重启时，会给其他用户发送提示信息
- shutdown - h now ： 表示立刻开机
- shutdown - h 20:45 表示定时关机，晚上8点45定时关机
- shutdown -h +10 ： 表示从当前时再往后十分钟关机

---

#### 【重点】查看系统进程 ---》ps

- 格式：ps -aux

potions

- -a ：显示终端上的所有进程，包括其他用户的进程
- -u ： 显示进程的详细状态
- -x ： 显示没有控制终端的进程

一般结合grep使用，来查找特定的应用程序的进程

- ps -aux ｜ grep bin

​	**另一种查看方式：** ps -ef| grep bin-----》苹果使用

---

#### 【知道】实时查看系统的进程---〉top（跟任务管理器一样动态的）

- 命令 top
- 快捷键
  - M(按shift+m)可以按内存的使用率  **降序**  排列显示进程的信息
  - P(按shift+p)可以按cpu使用率  **降序**  排列显示进程的信息

---

#### 【重点】关闭进程：kill

- 格式： kill -9  进程ID
  - 进程id一般会通过ps命令去查看到
  - -9 表示的是强制关闭
- 注意：当前执行操作的用户，普通用户不能关闭其他用户的进程，只能关闭自己创建的进程

---

#### 【重点】查看系统监听端口： netstat

- 格式： netstat [-anptu]  ｜ grep '关键字' ---》root用户操作

- options

  - -a ： 查看所有已打开的端口

  - -n ： 以数字方式显示已打开的端口，不显示别名
    - （http：80  https：443  mysql：3306  ssh：22）

  - -p ： 显示对应的进程PID

  - -t ： 显示出tcp端口

  - -u ： 显示出udp端口

- 例子
  - 查看当前系统已打开的TCP端口： netstat -anpt
  - 查看当前系统是否打开3306端口： netstat -anupt ｜ grep '3306'
  - 查看当前系统是否打开http的服务： netstat -aptu ｜ grep 'http'
  - mac ： netstat -anp tcp

#### 【知道】根据端口查看进程

- 命令格式：lsof -i （root用户操作）

options 

- -i ： 表示查看所有已打开的进程的端口
  - lsof -i ：端口号    表示查看特定的端口是否已打开
- 例子
  - 查看系统所有已打开的进程端口： lsof -i
  - 查看系统中3306端口是否打开： lsof -i：3306

使用场景：

- 当我们启动某个应用程序时，该应用程序的端口有可能被占用
- 那么此时可以通过netstat或者lsof查看对一个的端口被谁占用了
- 然后关闭重启

---

#### 查看日志信息--》head/tail

- 格式： head 文件名
- 默认显示日志文件有前10行内容
- head -20 文件名：显示日志文件前20行内容



#### 重点 tail查看

- 格式：tail 文件名
- 默认显示日志文件最后10行
- tail -10 文件名：显示日志文件最后15行
- tail -f 文件名： 实时显示日志文件信息

---

### 用户权限和管理

#### 概念

**Linux系统文件和目录权限**

| 权限   | 英文    | 缩写 | 数字代号 |
| ------ | ------- | ---- | -------- |
| 读     | read    | r    | 4        |
| 写     | write   | w    | 2        |
| 执行   | execute | x    | 1        |
| 无权限 | /       | -    | 0        |

`通过 ls -l  或 ls -al查看文件权限信息`

>total 1568
>
>drwx------@ 5 bytedance staff   160 9 5 12:04 Applications
>
>-rw-r--r--@ 1 bytedance staff 268919 10 9 20:55 CDP-CICD-多版本 1.txt
>
>drwx------@ 23 bytedance staff   736 10 10 20:53 Desktop
>
>drwx------@ 10 bytedance staff   320 9 19 20:43 Documents

1. 第一个符号
   1. -：普通文件
   2. l：即link 链接文件
   3. d：文件夹
2. 随后每3个字符为一组权限
   1. 第一组拥有者权限---》开机登陆的用户
   2. 第二组时组权限
   3. 第三组是其他用户权限

---

#### 修改用户权限

##### 【了解】chmod ： 字母法

- 格式：chmod  u+rwx  1.txt
  - chmod u+rwx，o-rwx，a=rwx 1.txt
- 用户选项
  - u ： 表示的是所属的用户
  - g  ： 表示所属的用户组
  - o ： 表示是其他用户
  - a ： 表示的是所有用户
- options
  - +：表示增加权限
  - -：表示撤销权限
  - =：表示设置权限
- example：
  - chmod u+w  1.txt  给当前目录下的1.txt文件的当前用户增加写的权限
  - chmod g-x   1.txt  给当前目录下的1.txt文件撤销用户组的执行权限
  - chmod o=rwx  1.txt  给当前目录下的1.txt文件的其他用户权限设置为可读可写可执行

---

##### 【重点】chmod ： 数字法

- 格式：chmod 753 文件名
  - 第一个7：u用户--》4+2+1（rwx）
  - 第一个5: g用户组 --〉4+1（rx）
  - 第二个5: o其他用户--》2+1（wx）
- r ： 4
- w ：2
- x ： 1

---

#### 【了解】新增和查看登陆用户

- 新增用户：useradd 用户名
- useradd  admin123:创建一个普通用户admin123
- useradd  -g  root admin2 ： 创建用户 admin2，并且添加到root组内



- 查看登陆账户：who或whoami
- options
  - -q 或 --count ： 只显示用户的登录账号和登录用户的数量
  - -u 或 --heading ： 显示列标题



- 删除用户 ： userdel  -r  用户名  -r作用把用户目录都删除

---

#### 【知道】切换用户、修改密码、退出

- 切换用户：su- 或者 su 用户名或者sudo---》（switch user） 
  - su-：切换到root用户
  - su 用户名：切换到指定用户下
  - 注意：普通用户切换到其他用户需要输入密码



- 设置密码：passwd  或者 passwd  用户名
  - passwd ： 用于设置当前用户的密码
  - passwd  用户名 ：用于设置指定用户的密码（执行命令的用户必须是---》root）



- 退出登录的用户  exit

  - 如果是图形界面，退出当前终端
  - 如果是使用SSH远程登录，退出登陆账号
  - 如果是切换后的登陆用户，退出则返回上一个登陆账号

  1. admin ---》su ---root  ---su zhangsan  ---〉exit---》root
  2. admin ---》exit（退出shell）
  3. admin ---〉su root ---》exit---〉admin ---》exit（退出shell）

---

### 其他命令

#### 【重点】查找文件

- 格式：find [路径] -name 文件名
  - 路径不写时，默认表示当前目录
  - 文件名可以使用通配符，使用通配符时，文件名必必须在引号里面
    - 例子：find . -name  test.sh  在当前目录及子目录下查找名称为test.sh的文件
    - 例子：find . -name 'abc*.txt'  在当前目录及子目录下查找名称为abc开头的txt文件

---

#### 【了解】软连接 ：ln（快捷方式）

- 格式：ln -s 源文件  链接文件  s》〉》soft
- 软连接只是指向源文件的一个链接，类似于快捷方式
- 源文件要使用绝对路径，不能使用相对路径，这样可以方便移动链接文件后，仍然能够正常使用
- 软链接可以链接目录



##### 硬链接：

- ln命令不带 -s 参数时，创建的是硬链接即---》ln  源文件  链接文件
- 硬链接的文件大小与源文件相同，即使删除源文件，链接文件依然存在



##### 软硬链接的区别

- 软连接源文件被删除后，链接文件失效，没有意义
- 硬链接的源文件被删除后，链接文件还存在，链接文件的大小与源文件的大小一致
  - 硬链接只能普通文件，不能是文件夹

---

#### 【知道】打包和解包

- 格式：
  - tar  -cvf  打包文件名  文件或目录（打包）
  - tar  -xvf  打包文件名  （解包）
    - tar -xvf 打包文件名   -C     指定路径
- options       
  - -c ： 创建打包文件
  - -v ： 显示出打包或解包的进度
  - -f ： 用于指定打包文件名（一般f放在选项的最后，用于指定打包的文件名）f》〉》file 
  - -x ： 表示解包对应的文件 x〉》〉extract（提解，解出）

---

#### 解压缩

##### 【重点】gzip---》后缀为 .tar.gz

- 格式 gzip [选项] 被压缩的文件
- options 
  - -r ： 压缩所有子目录
  - -d ： 解压
- 注意：实际应用是在tar选项中增加一个 -z 选项来调用gzip 实现打包和压缩的过程
  - 压缩文件：tar -zcvf    打包文件 .tar.gz     被压缩的文件/路径
  - 解压缩文件：tar -zxvf 打包文件 .tar.gz
  - 解压缩文件到指定目录：tar  -zxvf 打包文件 .tar.gz  -C 目标路径



##### 【知道】biz2---〉后缀为 .tar.bz2

- 注意：实际应用是在tar选项中增加一个 -j 选项来调用biz2实现打包和压缩的过程
  - 压缩文件：tar -jcvf 打包文件 .tar.bz2 被压缩的文件/路径
  - 解压缩文件：tar -jxvf 打包文件  .tar bz2

##### 【知道】zip 、unzip ---》后缀为  .zip

- 压缩文件：zip [-r]  压缩文件名  文件或目录
  - -r ： 表示压缩的是一个目录
  - 压缩的文件名不能带后缀名
- 解压缩：unzip  -d 解压目录  被压缩的文件名

---

#### Vi编辑器

##### 简介

- vi是Linux系统下的命令行工具
  - 使用命令行操作
- vi可以堆Linux下的文件内容进行新增、修改、删除、替换
- vi编辑器可以用来创建文件
- vi编辑器不能对文件进行排版

##### 三种工作模式

- 命令行模式：通过对应的快捷键或者命令来管理文件
- 插入模式：在插入模式下主要是用来对文件的 **增加、修改**操作
- 末行模式：主要用来保存文件或者退出文件

**切换模式**

- 首次进入编辑器，使用命令行，模式
- 可以通过 `i 、 I 、 a 、A` 进入到插入模式，按ESC可以回到命令行模式
- 通过`Shift +  冒号   ----》进入末行模式
  - 在，末行模式可以通过快捷键进行操作
    - w ： 表示保存文件 并 返回命令行模式
    - q ： 表示退出编辑器
    - ! ： 表示强制
    - wq! : 表示强制保存退出编辑器

##### Vim基本操作

1. 打开文件
2. 编辑
3. 修改
4. 适当使用快捷家（命令模式下使用）
   1. yy ： 复制，n yy 复制n行
   2. p ： 粘贴
   3. dd ： 剪切 
   4. u： 一步步撤销
   5. Ctrl + r  ： 反撤销
   6. \>\>:文本行右移
5. 保存

---

